From f722d7fb3116fe8c384077a8f0ea315a615c9fb9 Mon Sep 17 00:00:00 2001
From: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
Date: Thu, 15 Oct 2020 14:08:42 +0300
Subject: [PATCH] HACK: do not enumerated SFI devices

Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
Signed-off-by: Ferry Toth <ftoth@exalondelft.nl>
---
 arch/x86/platform/intel-mid/device_libs/platform_bt.c            | 1 +
 arch/x86/platform/intel-mid/device_libs/platform_gpio_keys.c     | 1 +
 arch/x86/platform/intel-mid/device_libs/platform_mrfld_pinctrl.c | 1 +
 arch/x86/platform/intel-mid/device_libs/platform_mrfld_rtc.c     | 1 +
 arch/x86/platform/intel-mid/device_libs/platform_mrfld_sd.c      | 1 +
 5 files changed, 5 insertions(+)

diff --git a/arch/x86/platform/intel-mid/device_libs/platform_bt.c b/arch/x86/platform/intel-mid/device_libs/platform_bt.c
index 31dda18bb370..5c26c64dff64 100644
--- a/arch/x86/platform/intel-mid/device_libs/platform_bt.c
+++ b/arch/x86/platform/intel-mid/device_libs/platform_bt.c
@@ -73,6 +73,7 @@ static int __init bt_sfi_init(void)
 	struct bt_sfi_data *ddata;
 	int ret;
 
+	return -ENODEV;
 	id = x86_match_cpu(bt_sfi_cpu_ids);
 	if (!id)
 		return -ENODEV;
diff --git a/arch/x86/platform/intel-mid/device_libs/platform_gpio_keys.c b/arch/x86/platform/intel-mid/device_libs/platform_gpio_keys.c
index d9435d2196a4..d01ecd82f328 100644
--- a/arch/x86/platform/intel-mid/device_libs/platform_gpio_keys.c
+++ b/arch/x86/platform/intel-mid/device_libs/platform_gpio_keys.c
@@ -60,6 +60,7 @@ static int __init pb_keys_init(void)
 	struct gpio_keys_button *gb = gpio_button;
 	int i, good = 0;
 
+	return -ENODEV;
 	for (i = 0; i < ARRAY_SIZE(gpio_button); i++) {
 		gb[i].gpio = get_gpio_by_name(gb[i].desc);
 		pr_debug("info[%2d]: name = %s, gpio = %d\n", i, gb[i].desc,
diff --git a/arch/x86/platform/intel-mid/device_libs/platform_mrfld_pinctrl.c b/arch/x86/platform/intel-mid/device_libs/platform_mrfld_pinctrl.c
index 605e1f94ad89..49e399a23537 100644
--- a/arch/x86/platform/intel-mid/device_libs/platform_mrfld_pinctrl.c
+++ b/arch/x86/platform/intel-mid/device_libs/platform_mrfld_pinctrl.c
@@ -31,6 +31,7 @@ static struct platform_device mrfld_pinctrl_device = {
 
 static int __init mrfld_pinctrl_init(void)
 {
+	return -ENODEV;
 	if (intel_mid_identify_cpu() == INTEL_MID_CPU_CHIP_TANGIER)
 		return platform_device_register(&mrfld_pinctrl_device);
 
diff --git a/arch/x86/platform/intel-mid/device_libs/platform_mrfld_rtc.c b/arch/x86/platform/intel-mid/device_libs/platform_mrfld_rtc.c
index 40e9808a9634..595823bde23f 100644
--- a/arch/x86/platform/intel-mid/device_libs/platform_mrfld_rtc.c
+++ b/arch/x86/platform/intel-mid/device_libs/platform_mrfld_rtc.c
@@ -36,6 +36,7 @@ static int __init mrfld_legacy_rtc_alloc_irq(void)
 
 static int __init mrfld_legacy_rtc_init(void)
 {
+	return -ENODEV;
 	if (intel_mid_identify_cpu() != INTEL_MID_CPU_CHIP_TANGIER)
 		return -ENODEV;
 
diff --git a/arch/x86/platform/intel-mid/device_libs/platform_mrfld_sd.c b/arch/x86/platform/intel-mid/device_libs/platform_mrfld_sd.c
index fe3b7ff975f3..b1ef26d2156e 100644
--- a/arch/x86/platform/intel-mid/device_libs/platform_mrfld_sd.c
+++ b/arch/x86/platform/intel-mid/device_libs/platform_mrfld_sd.c
@@ -34,6 +34,7 @@ mrfld_sdhci_pci_get_data(struct pci_dev *pdev, int slotno)
 
 static int __init mrfld_sd_init(void)
 {
+	return -ENODEV;
 	if (intel_mid_identify_cpu() != INTEL_MID_CPU_CHIP_TANGIER)
 		return -ENODEV;
 
-- 
2.30.2

